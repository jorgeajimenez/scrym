<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formation Visualizer</title>
    <style>
        :root { --bg: #0f172a; --text: #f8fafc; --field: #1e293b; }
        body { background: var(--bg); color: var(--text); font-family: sans-serif; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .controls { margin-bottom: 20px; display: flex; gap: 10px; align-items: center; }
        select, button { padding: 10px; border-radius: 4px; border: none; font-size: 16px; cursor: pointer; }
        canvas { background: var(--field); border: 2px solid #334155; border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .legend { margin-top: 10px; font-size: 14px; opacity: 0.7; }
    </style>
</head>
<body>

    <h2>üèà Formation Visualizer</h2>
    
    <div class="controls">
        <select id="formationSelect">
            <optgroup label="Offense">
                <option value="Shotgun Spread">Shotgun Spread</option>
                <option value="Singleback Ace">Singleback Ace</option>
                <option value="I-Formation">I-Formation</option>
                <option value="Empty Set">Empty Set</option>
            </optgroup>
            <optgroup label="Defense">
                <option value="Base 4-3">Base 4-3</option>
                <option value="Nickel 4-2-5">Nickel 4-2-5</option>
                <option value="Goal Line 6-2">Goal Line 6-2</option>
            </optgroup>
        </select>
        <button onclick="drawFormation()">LOAD</button>
    </div>

    <canvas id="fieldCanvas" width="500" height="300"></canvas>
    
    <div class="legend">
        Origin (0,0) is center ball. Blue = Offense, Red = Defense.
    </div>

    <script>
        // Coordinates from formation_logic.py
        const DATA = {
            "Shotgun Spread": [
                {r: "C", x: 0, y: 0, c: "blue"}, {r: "QB", x: 0, y: -5, c: "blue"},
                {r: "LG", x: -1.5, y: 0, c: "blue"}, {r: "RG", x: 1.5, y: 0, c: "blue"},
                {r: "LT", x: -3, y: 0, c: "blue"}, {r: "RT", x: 3, y: 0, c: "blue"},
                {r: "RB", x: 1.5, y: -5, c: "blue"}, {r: "WR", x: -20, y: 0, c: "blue"},
                {r: "WR", x: 20, y: 0, c: "blue"}, {r: "WR", x: -15, y: 0, c: "blue"}, {r: "TE", x: 4.5, y: 0, c: "blue"}
            ],
            "I-Formation": [
                {r: "C", x: 0, y: 0, c: "blue"}, {r: "QB", x: 0, y: -1, c: "blue"},
                {r: "FB", x: 0, y: -4, c: "blue"}, {r: "RB", x: 0, y: -7, c: "blue"},
                {r: "WR", x: -20, y: 0, c: "blue"}, {r: "WR", x: 20, y: 0, c: "blue"}, {r: "TE", x: 4.5, y: 0, c: "blue"}
            ],
            "Base 4-3": [
                {r: "DE", x: -4, y: 1, c: "red"}, {r: "DT", x: -1.5, y: 1, c: "red"},
                {r: "DT", x: 1.5, y: 1, c: "red"}, {r: "DE", x: 4, y: 1, c: "red"},
                {r: "LB", x: -4, y: 4, c: "red"}, {r: "MLB", x: 0, y: 4, c: "red"}, {r: "LB", x: 4, y: 4, c: "red"},
                {r: "CB", x: -20, y: 5, c: "red"}, {r: "CB", x: 20, y: 5, c: "red"},
                {r: "S", x: -8, y: 12, c: "red"}, {r: "S", x: 8, y: 12, c: "red"}
            ]
            // ... more can be added easily
        };

        const canvas = document.getElementById('fieldCanvas');
        const ctx = canvas.getContext('2d');
        const SCALE = 10; // 1 yard = 10 pixels

        function drawFormation() {
            const name = document.getElementById('formationSelect').value;
            const players = DATA[name] || [];
            
            // Clear
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw Line of Scrimmage
            ctx.strokeStyle = "rgba(255,255,255,0.2)";
            ctx.beginPath(); ctx.moveTo(0, 150); ctx.lineTo(500, 150); ctx.stroke();

            // Draw Center Hash
            ctx.fillStyle = "white";
            ctx.fillRect(248, 148, 4, 4);

            players.forEach(p => {
                const drawX = 250 + (p.x * SCALE);
                const drawY = 150 - (p.y * SCALE); // Y is inverted in canvas vs coords

                // Player Circle
                ctx.fillStyle = p.c === "blue" ? "#3b82f6" : "#ef4444";
                ctx.beginPath();
                ctx.arc(drawX, drawY, 8, 0, Math.PI * 2);
                ctx.fill();

                // Role Label
                ctx.fillStyle = "white";
                ctx.font = "bold 10px Arial";
                ctx.textAlign = "center";
                ctx.fillText(p.r, drawX, drawY + 4);
            });
        }

        // Initial draw
        drawFormation();
    </script>
</body>
</html>
